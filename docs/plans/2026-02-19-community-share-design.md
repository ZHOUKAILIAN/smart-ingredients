# 社区分享与浏览 设计说明

**日期**：2026-02-19  
**目标**：新增社区能力，支持匿名发布与公开浏览，分享分析结果为结果卡片，允许删除。

## 范围
- 底部导航新增“社区”Tab（顺序：首页 / 历史 / 社区 / 我的）
- 结果页与历史详情页的“分享到社区”入口
- 社区列表与详情页（公开浏览）
- 结果卡片混合渲染（结构化数据 + 可选图片缓存）
- 匿名删除（share_token）与已分享状态标记

不包含评论/点赞/推荐/内容审核。

## 关键设计

### 分享内容形态
结果卡片为核心：缩略图（可选）、健康评分、摘要文本；详情展示原始配料表文本。  
若有图片则直接展示；无图片则由结构化数据渲染卡片。

### 发布与删除
发布时客户端生成 share_token 并本地保存；后端仅保存 hash。  
删除需携带 token 或登录身份；入口放在历史详情页。

### API 概览
- POST /api/v1/community/posts（结构化数据 + 可选图片）
- GET /api/v1/community/posts（最新列表分页）
- GET /api/v1/community/posts/{id}（详情）
- DELETE /api/v1/community/posts/{id}（删除）

### 数据模型（新增）
community_posts：保存结构化卡片数据、摘要、健康评分、配料表原文与可选图片 URL。

## 风险与后续
- 图片存储增长与清理策略
- 匿名滥用风险（后续审核/举报）
- 结构化字段的最小集合需要进一步确认
