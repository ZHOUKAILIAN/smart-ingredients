# 007-Figma 首页 UI 与交互改版技术方案

## 元数据

| 字段     | 值 |
| -------- | --- |
| 文档编号 | 007-figma-ui-redesign |
| 标题     | Figma 首页 UI 与交互改版技术方案 |
| 版本     | 1.0 |
| 状态     | 草稿 |
| 创建日期 | 2026-01-20 |
| 更新日期 | 2026-01-20 |
| 作者     | Codex |
| 关联需求 | 007-figma-ui-redesign |

## 概述

### 目的
说明如何在现有前端技术栈中落地 Figma 首页/拍摄/报告三页的 UI 与交互改版，并保持现有业务流程不变。

### 范围
- 前端 UI 组件、页面布局、交互状态调整
- 页面流转逻辑的轻量调整（Home → Scan → Results）
- 不涉及后端 API、数据结构变更

### 假设
- 前端采用 Tauri + Leptos，已有首页/拍摄/报告基础页面
- UI 组件库已存在基础按钮、卡片、徽章、进度条等组件
- 可直接在现有页面中重构布局与样式

## 架构设计

### 高层架构
保持现有前端路由或视图状态管理方式，仅替换页面内容与交互状态呈现。

### 组件图
- Home 页面组件（品牌区、步骤卡、示例入口、主 CTA）
- Scan 页面组件（空态/已上传态/分析中态）
- Results 页面组件（评分卡、配料列表、营养列表、建议卡、底部操作栏）
- Waiting 页面组件（OCR 等待、分析等待）
- 公共组件：Button、Card、Badge、Progress、TopBar

### 技术栈

| 组件 | 技术 | 选择理由 |
| ---- | ---- | -------- |
| 前端框架 | Leptos | 现有项目标准技术栈 |
| 桌面容器 | Tauri | 现有项目标准技术栈 |
| 样式 | Tailwind/现有样式系统 | 与现有组件一致，便于复用 |

## 数据模型

### 实体
无新增实体，沿用现有前端状态数据。

### 模式
无数据库或接口契约变更。

### 数据流
页面状态流转：Home → Scan（图片选择）→ OCR 等待 → 分析等待 → Results → Home/Scan。

## API 设计
不涉及新增或修改 API。

## 安全设计

### 认证
无新增认证需求。

### 授权
无新增授权需求。

### 数据保护
不新增数据收集或存储行为。

## 错误处理

### 错误码
无新增错误码。

### 错误响应格式
不变。

## 性能考虑

### 缓存策略
无新增缓存。

### 优化
- 使用现有组件和轻量样式类，避免额外大图资源
- 组件拆分避免重复渲染

### 监控
沿用现有前端日志/埋点策略（如有）。

## 测试策略

### 单元测试
- 关键组件渲染与状态切换（Home/Scan/Results）
- 等待页（OCR/Analyzing）样式与文案渲染

### 集成测试
- 页面流转流程：开始分析 → 上传 → 分析中 → 报告页 → 返回首页

### E2E 测试
- 桌面端手动走完整流程，验证按钮状态与布局一致性

## 部署

### 环境要求
无新增要求。

### 配置
无新增配置项。

### 回滚计划
保留改版前的组件与样式分支，必要时回退到上一个版本。

## 实施阶段

### 阶段 1：UI 结构调整
- [ ] 首页结构与样式对齐 Figma
- [ ] Scan 页面空态/已上传态布局重构
- [ ] Results 页面信息层级与卡片布局重构

### 阶段 2：交互与细节完善
- [ ] 分析中按钮状态与加载反馈
- [ ] 顶部与底部操作栏交互一致性
- [ ] 适配不同屏宽的布局微调
- [ ] OCR/分析等待页视觉统一

## 风险与缓解

| 风险 | 影响 | 可能性 | 缓解措施 |
| ---- | ---- | ------ | -------- |
| UI 改版影响现有功能流程 | 中 | 中 | 逐页替换并做流程回归测试 |
| 样式与现有主题冲突 | 中 | 中 | 统一使用现有组件与样式变量 |
| 移动端/小屏适配问题 | 低 | 中 | 增加宽度区间测试与布局修正 |

## 待解决问题

| 问题 | 影响 | 负责人 | 状态 |
| ---- | ---- | ------ | ---- |
| 查看示例按钮是否接入真实示例内容 | 中 | 产品 | 开放 |
| 分享按钮是否接入系统分享 | 中 | 前端 | 开放 |

## 参考资料

- `docs/requirements/007-figma-ui-redesign-requirements.md`
- https://azure-ginger-22468431.figma.site/

---

## 变更记录

| 版本 | 日期 | 作者 | 描述 |
| ---- | ---- | ---- | ---- |
| 1.0 | 2026-01-20 | Codex | 初始版本 |
