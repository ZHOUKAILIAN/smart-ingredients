# 025-微信开发者工具项目配置技术方案

## 元数据

| 字段     | 值                           |
| -------- | ---------------------------- |
| 文档编号 | 025-miniapp-devtools-config  |
| 标题     | 微信开发者工具项目配置技术方案 |
| 版本     | 1.0                          |
| 状态     | 草稿                         |
| 创建日期 | 2026-02-19                   |
| 更新日期 | 2026-02-19                   |
| 作者     | 小周                         |
| 关联需求 | 025-miniapp-devtools-config  |

## 概述

### 目的
提供标准化 `project.config.json`，支持微信开发者工具从 `miniapp/` 根目录导入并指向 `dist/`，消除编译过程中 `app.json` 缺失的报错。

### 范围
- 新增 `miniapp/project.config.json`
- 不修改任何小程序代码与构建脚本

### 假设
- Taro 构建输出目录保持为 `dist/`
- 开发阶段默认使用 `touristappid`

## 架构设计

### 高层架构
无架构调整，仅新增配置文件。

### 组件图
- miniapp 项目根目录：新增 `project.config.json`
- dist 输出目录：作为 `miniprogramRoot`

### 技术栈

| 组件 | 技术 | 选择理由 |
| ---- | ---- | -------- |
| 项目配置 | 微信开发者工具配置文件 | 官方标准格式，最低成本接入 |

## 数据模型

### 实体
- `project.config.json`（项目配置）

### 数据流
1. 微信开发者工具导入 `miniapp/`
2. 读取 `project.config.json`
3. 指向 `dist/` 作为小程序根目录

## API 设计
无新增接口。

## 安全设计
无新增认证/授权需求。

## 错误处理
- 若 `dist/` 不存在，提示先执行 `npm run dev:weapp` 或 `npm run build:weapp`

## 性能考虑
无影响。

## 测试策略

### 集成测试
- 执行 `npm run build:weapp`
- 微信开发者工具导入 `miniapp/`
- 观察是否仍出现 `app.json is not found` 报错

## 部署
无部署变更。

## 实施阶段

### 阶段 1：新增配置文件
- [ ] 新增 `miniapp/project.config.json`
- [ ] 设置 `miniprogramRoot: "dist/"` 与 `appid: "touristappid"`

### 阶段 2：验证导入流程
- [ ] 重新导入 `miniapp/` 根目录
- [ ] 确认微信开发者工具正常加载

## 风险与缓解

| 风险 | 影响 | 可能性 | 缓解措施 |
| ---- | ---- | ------ | -------- |
| AppID 与实际项目不一致导致功能受限 | 中 | 中 | 默认使用测试号，支持后续替换 |
| 开发者误导入 `dist/` 目录 | 中 | 中 | 文档强调导入根目录 |

## 待解决问题

| 问题 | 影响 | 负责人 | 状态 |
| ---- | ---- | ------ | ---- |
| 是否需要增加 `project.private.config.json` | 中 | 小周 | 开放 |

## 参考资料

- 微信开发者工具 `project.config.json` 配置说明

---

## 变更记录

| 版本 | 日期 | 作者 | 描述 |
| ---- | ---- | ---- | ---- |
| 1.0 | 2026-02-19 | 小周 | 初始版本 |
