# 025-微信开发者工具项目配置需求文档

## 元数据

| 字段 | 值 |
|------|-----|
| 文档编号 | 025-miniapp-devtools-config |
| 标题 | 微信开发者工具项目配置需求文档 |
| 版本 | 1.0 |
| 状态 | 草稿 |
| 创建日期 | 2026-02-19 |
| 更新日期 | 2026-02-19 |
| 作者 | 小周 |

## 概述

### 目的
为 miniapp 提供标准的微信开发者工具项目配置，支持从 `miniapp/` 根目录导入并正确指向 `dist/`，避免编译过程中 `dist` 清空导致的 `app.json` 缺失报错。

### 范围
**包含**：
- 新增 `miniapp/project.config.json`，设置 `miniprogramRoot: "dist/"`
- 默认使用测试 AppID（`touristappid`）

**不包含**：
- 小程序代码逻辑变更
- 后端/接口调整
- 构建脚本或 Taro 配置调整

### 利益相关者
- 研发：稳定导入与热更新体验
- 测试：降低环境配置失败概率

## 功能需求

### 需求 1：提供标准项目配置文件
- **编号**: FR-001
- **优先级**: 高
- **描述**: 在 `miniapp/` 根目录新增 `project.config.json`，配置 `miniprogramRoot` 指向 `dist/`，并设置 `appid` 为测试号。
- **验收标准**:
  - [ ] `miniapp/project.config.json` 被纳入版本控制
  - [ ] 微信开发者工具导入 `miniapp/` 根目录可正常识别项目
  - [ ] Taro 构建/热更新时不再出现 `app.json is not found` 报错

### 需求 2：支持后续替换 AppID
- **编号**: FR-002
- **优先级**: 中
- **描述**: 配置文件使用 `touristappid` 作为默认值，允许开发者按需替换为正式 AppID。可替换位置：`miniapp/project.config.json` 的 `appid` 字段。
- **验收标准**:
  - [ ] 配置中的 AppID 为 `touristappid`
  - [ ] 文档说明可替换 AppID 的位置

## 非功能需求

### 可靠性
- 配置文件长期稳定，不依赖编译产物存在与否

### 可维护性
- 配置结构遵循微信开发者工具标准格式

## 用户故事

### 故事 1
- **作为** 开发者
- **我想要** 直接导入 `miniapp/` 根目录
- **以便** 在编译过程中不因 `dist` 清空导致报错

### 故事 2
- **作为** 项目维护者
- **我想要** 用测试号默认配置
- **以便** 新成员无需额外申请即可启动开发流程

## 用例

### 用例 1：导入项目
- **参与者**: 开发者
- **前置条件**: 已执行 `npm run dev:weapp` 或 `npm run build:weapp`
- **主流程**:
  1. 打开微信开发者工具
  2. 导入 `miniapp/` 目录
  3. 工具识别 `miniprogramRoot` 并加载 `dist/`
- **后置条件**: 项目可预览与调试
- **备选流程**: 将 AppID 替换为正式 AppID

## 约束条件

### 技术约束
- 配置需符合微信开发者工具 `project.config.json` 规范

## 依赖关系

### 内部依赖
- Taro 构建输出目录为 `dist/`

### 外部依赖
- 微信开发者工具

## 成功指标

- 导入 `miniapp/` 后不再出现 `app.json` 缺失报错
- 初次导入成功率提升

## 待解决问题

| 问题 | 影响 | 负责人 | 状态 |
|------|------|--------|------|
| 是否需要新增 `project.private.config.json` 用于本地 AppID 覆盖 | 中 | 小周 | 开放 |

## 参考资料

- 微信开发者工具 `project.config.json` 配置说明

---

## 变更记录

| 版本 | 日期 | 作者 | 描述 |
|------|------|------|------|
| 1.0 | 2026-02-19 | 小周 | 初始版本 |
