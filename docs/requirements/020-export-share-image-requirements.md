# 020 - 导出分析结果为图片并分享

## 概述

用户完成食品配料表分析后，能够将分析结果导出为精美的图片（长图），并通过系统原生分享功能分享到社交媒体或保存到相册。

## 用户场景

### 场景 1：保存结果图片

用户在查看分析结果页面时，点击"导出图片"按钮，系统将当前分析结果渲染为一张精美的长图，并下载/保存到本地。

### 场景 2：分享结果

用户点击"分享"按钮，系统生成结果图片后，调用系统原生分享功能（Web Share API），允许用户分享到微信、微博等社交平台。

## 功能需求

### FR-1：导出图片按钮

- 在分析结果页（`/result` 和 `/summary`）底部操作区域新增"导出图片"按钮
- 按钮使用分享图标（📤），与现有的"返回首页"和"分析新产品"按钮并列

### FR-2：结果图片生成

- 使用 Canvas API 在前端绘制分析结果长图
- 图片内容包括：
  - 顶部品牌标识 "Smart Ingredients"
  - 健康评分（圆形进度指示器）
  - 配料分析列表（名称 + 风险等级）
  - 健康建议
  - 配料表分析总结
  - 底部水印/二维码区
- 图片风格与 APP 设计语言一致（渐变绿色主题）
- 图片宽度固定 750px，高度根据内容自适应

### FR-3：图片下载

- 生成图片后自动触发下载
- 文件名格式：`smart-ingredients-分析结果-{日期}.png`

### FR-4：分享功能

- 优先使用 Web Share API（支持移动端原生分享）
- 降级方案：复制图片到剪贴板或直接下载

## 非功能需求

### NFR-1：性能

- 图片生成时间 < 2 秒
- 生成过程中显示加载提示

### NFR-2：兼容性

- 支持 Web 和 Tauri 桌面端
- 移动端 WebView（Android/iOS）兼容

## UI 设计

### 按钮布局

结果页底部操作区变为三列：

```
[ 返回首页 ] [ 📤 导出图片 ] [ 分析新产品 ]
```

### 生成图片样式

长图采用卡片风格布局，渐变背景，包含所有分析要素。

## 成功标准

- [ ] 点击导出按钮可成功生成 PNG 图片
- [ ] 图片内容完整，包含所有分析信息
- [ ] 图片美观，与应用设计风格一致
- [ ] 移动端可通过系统分享功能分享图片
- [ ] 不引入额外的重型依赖（纯 Canvas API 实现）
